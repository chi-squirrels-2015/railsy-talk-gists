##Custom Routing

![Spirited Away](http://media.tumblr.com/tumblr_m03wkxE46I1r58jjo.gif)

> **Resources and Key Search Words:**
> [Rails Guides](http://guides.rubyonrails.org/routing.html#non-resourceful-routes), [Resourceful Routing](http://edgeguides.rubyonrails.org/routing.html#resource-routing-the-rails-default), [RESTful Routing](http://en.wikipedia.org/wiki/Representational_state_transfer#Applied_to_web_services), [Singular Resources](http://guides.rubyonrails.org/routing.html#singular-resources), [Non-Resourceful Routing](http://guides.rubyonrails.org/routing.html#non-resourceful-routes), [Customizing Resourceful Routes](http://guides.rubyonrails.org/routing.html#customizing-resourceful-routes)

&nbsp;

> ###Understanding Non-Resourceful + Un-RESTful Routes
> To understand custom routing it is important to first understand Rails' default [Resourceful Routing](http://edgeguides.rubyonrails.org/routing.html#resource-routing-the-rails-default) and [RESTful Routing](http://en.wikipedia.org/wiki/Representational_state_transfer#Applied_to_web_services). In some cases, Resourceful Routing may not yield an appropriate route for a given need or requirement. Rails has powerful support for routing arbitrary URLs to actions. Here, you don't get groups of routes automatically generated by resourceful routing. Instead, you set up each route within your application separately.

> While you should usually use resourceful routing, there are still many places where the simpler routing is more appropriate. There's no need to try to shoehorn every last piece of your application into a resourceful framework if that's not a good fit.


###Singular Resources â€” A Primer
Sometimes, you have a resource that clients always look up without referencing an ID. For example, you would like ```/profile``` to always show the profile of the currently logged in user. In this case, you can use a singular resource to map ```/profile``` (rather than ```/profile/:id```) to the show action:

```ruby
get 'profile', to: 'users#show'
```
Passing a String to get will expect a controller#action format, while passing a Symbol will map directly to an action:

```ruby
get 'profile', to: :show
```
This resourceful route:
```ruby
resource :geocoder
```
creates six different routes in your application, all mapping to the Geocoders controller:

| HTTP Verb | Path           | Controller#Action | Used for                                      |
|-----------|----------------|-------------------|-----------------------------------------------|
| GET       | /geocoder/new  | geocoders#new	   | return an HTML form for creating the geocoder |
| POST      | /geocoder      | geocoders#create	 | create the new geocoder                       |
| GET       | /geocoder      | geocoders#show	   | display the one and only geocoder resource    |
| GET       | /geocoder/edit | geocoders#edit    | return an HTML form for editing the geocoder  |
| PATCH/PUT | /geocoder      | geocoders#update	 | update the one and only geocoder resource     |
| DELETE    | /geocoder      | geocoders#destroy | delete the geocoder resource                  |


> ***Note:*** *Because you might want to use the same controller for a singular route (/account) and a plural route (/accounts/45), singular resources map to plural controllers. So that, for example, resource :photo and resources :photos creates both singular and plural routes that map to the same controller (PhotosController).*

A singular resourceful route generates these helpers:

* new_geocoder_path returns /geocoder/new
* edit_geocoder_path returns /geocoder/edit
* geocoder_path returns /geocoder

As with plural resources, the same helpers ending in _url will also include the host, port and path prefix.

> ***Important!*** *A long-standing bug prevents form_for from working automatically with singular resources. As a workaround, > specify the URL for the form directly, like so:*

```ruby
form_for @geocoder, url: geocoder_path do |f|
```

###Defining Defaults
You do not need to explicitly use the :controller and :action symbols within a route. You can supply them as defaults:

```ruby
get 'photos/:id', to: 'photos#show'
```

With this route, Rails will match an incoming path of ```/photos/12``` to the show action of PhotosController.

You can also define other defaults in a route by supplying a hash for the ```:defaults``` option. This even applies to parameters that you do not specify as dynamic segments. For example:

```ruby
get 'photos/:id', to: 'photos#show', defaults: { format: 'jpg' }
```
Rails would match ```photos/12``` to the show action of ```PhotosController```, and set ```params[:format]``` to "jpg".
